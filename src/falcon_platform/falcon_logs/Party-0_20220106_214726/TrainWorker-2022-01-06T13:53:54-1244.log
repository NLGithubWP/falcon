2022/01/06 13:53:54 global-const.go:220: Set env var to default {IS_DEBUG: debug-off}
2022/01/06 13:53:54 global-const.go:220: Set env var to default {TEST_IMG_NAME: redis:5.0.3-alpine3.8}
2022/01/06 13:53:54 global-const.go:220: Set env var to default {FALCON_WORKER_IMAGE: falcon-lime:latest}
2022/01/06 13:53:54 global-const.go:223: Read user defined env var {TASK_DATA_PATH: /dataPath}
2022/01/06 13:53:54 global-const.go:223: Read user defined env var {TASK_MODEL_PATH: /modelPath}
2022/01/06 13:53:54 global-const.go:223: Read user defined env var {TASK_DATA_OUTPUT: /dataOutputPath}
2022/01/06 13:53:54 global-const.go:223: Read user defined env var {RUN_TIME_LOGS: /opt/falcon/src/falcon_platform/falcon_logs/Party-0_20220106_214726/runtime_logs/party0-distributed-parameter-server0-job1-train}
2022/01/06 13:53:54 global-const.go:223: Read user defined env var {WORKER_ADDR: 127.0.0.1:22002}
2022/01/06 13:53:54 global-const.go:223: Read user defined env var {MASTER_ADDR: 127.0.0.1:22001}
2022/01/06 13:53:54 global-const.go:223: Read user defined env var {WORKER_ID: 0}
2022/01/06 13:53:54 global-const.go:223: Read user defined env var {GROUP_ID: 0}
2022/01/06 13:53:54 global-const.go:223: Read user defined env var {PARTY_ID: 0}
2022/01/06 13:53:54 global-const.go:223: Read user defined env var {DISTRIBUTED_ROLE: 0}
2022/01/06 13:53:54 global-const.go:223: Read user defined env var {MPC_EXE_PATH: /opt/falcon/third_party/MP-SPDZ/semi-party.x}
2022/01/06 13:53:54 global-const.go:223: Read user defined env var {FL_ENGINE_PATH: /opt/falcon/build/src/executor/falcon}
2022/01/06 13:53:54 falcon_platform.go:270: common.MpcExecutorPortFileBasePath is /opt/falcon/third_party/MP-SPDZ/Programs/Public-Input/
2022/01/06 13:53:54 global-const.go:220: Set env var to default {EXECUTOR_NAME: }
2022/01/06 13:53:54 falcon_platform.go:369: Launching falcon_platform, the common.WorkerType 
2022/01/06 13:53:54 rpcbase.go:28: [rpcbase] InitRpcBase called with Addr 127.0.0.1:22002
2022/01/06 13:53:54 workerbase.go:172: [WorkerBase]: reset called
2022/01/06 13:53:54 trainworker.go:47: [TrainWorker] Worker initialized, WorkerName=TrainWorker, WorkerID=0, PartyID=0, DistributedRole=distributed-parameter-server 
2022/01/06 13:53:54 workerbase.go:60: [WorkerBase]: RunWorker called
2022/01/06 13:53:54 trainworker.go:74: [TrainWorker] from PartyID 0 to register to masterAddr(127.0.0.1:22001)
2022/01/06 13:53:54 workerbase.go:98: [WorkerBase]: call Master.RegisterWorker to register WorkerAddr: 127.0.0.1:22002 
2022/01/06 13:53:54 rpc_utils.go:49: ----Rpc Call----, addr: 127.0.0.1:22001, methodName: Master.RegisterWorker 
2022/01/06 13:53:54 rpcbase.go:42: [TrainWorker]: listening on tcp, 0.0.0.0:22002 
2022/01/06 13:53:56 trainworker.go:177: [TrainWorker] TrainWorker.RunMpc called, mpcAlgorithmName: linear_regression
2022/01/06 13:53:56 manager.go:105: [ResourceManager]: DeleteResources done
2022/01/06 13:53:56 traintask.go:16: [TrainWorker]: spawn thread for mpc
2022/01/06 13:53:56 traintask.go:1056: [TrainWorker]: begin task mpc
2022/01/06 13:53:56 traintask.go:1062: [TrainWorker]: Third Party base path for executing semi-party.x is : "/opt/falcon/third_party/MP-SPDZ"
2022/01/06 13:53:56 traintask.go:1069: [TrainWorker]: Config mpc-network file, write [127.0.0.1:22006
127.0.0.1:22025
127.0.0.1:22044] to file [/opt/falcon/third_party/MP-SPDZ/mpc-network-0] 
2022/01/06 13:53:56 traintask.go:1087: [TrainWorker]: Config mpcExecutorPortFile file, write [54000] to file [/opt/falcon/third_party/MP-SPDZ/Programs/Public-Input/linear_regression] 
2022/01/06 13:53:56 traintask.go:1102: [TrainWorker]: Config mpcExecutorPairNetworkCfgPath file, write port [54000] to file [/opt/falcon/third_party/MP-SPDZ/Programs/Public-Input/linear_regression] 
2022/01/06 13:53:56 traintask.go:1132: ---------------------------------------------------------------------------------
2022/01/06 13:53:56 traintask.go:1133: [TrainWorker]: cmd is "/opt/falcon/third_party/MP-SPDZ/semi-party.x -F -N 3 -p 0 -I -ip /opt/falcon/third_party/MP-SPDZ/mpc-network-0 linear_regression"
2022/01/06 13:53:56 traintask.go:1134: ---------------------------------------------------------------------------------
2022/01/06 13:53:56 mngr-process.go:123: [subProcessMngr]: open subProcess, PID= 930
2022/01/06 13:54:01 trainworker.go:179: [TrainWorker]: WorkerAddr 127.0.0.1:22002, TrainWorker.RunMpc for task linear_regression done
2022/01/06 13:54:03 trainworker.go:90: [TrainWorker] TrainWorker.DoTask called, taskName: lime_feature_taskCiIvbG9nX3JlZy9zZWxlY3RlZF9zYW1wbGVkX2RhdGEudHh0EiEvbG9nX3JlZy9zZWxlY3RlZF9wcmVkaWN0aW9ucy50eHQaGy9sb2dfcmVnL3NhbXBsZV93ZWlnaHRzLnR4dCDoBygCOhFsaW5lYXJfcmVncmVzc2lvbkAUSiMvbG9nX3JlZy9zZWxlY3RlZF9mZWF0dXJlX2RhdGEwLnR4dA==
2022/01/06 13:54:03 trainworker.go:239: [TrainWorker]: ----------- WorkerAddr , printParams ----------- lime_feature_selection
2022/01/06 13:54:03 trainworker.go:328: [TrainWorker]: original params = {state:{NoUnkeyedLiterals:{} DoNotCompare:[] DoNotCopy:[] atomicMessageInfo:0xc0000e8810} sizeCache:0 unknownFields:[] SelectedSamplesFile:/log_reg/selected_sampled_data.txt SelectedPredictionsFile:/log_reg/selected_predictions.txt SampleWeightsFile:/log_reg/sample_weights.txt NumSamples:1000 ClassNum:2 ClassId:0 FeatureSelection:linear_regression NumExplainedFeatures:20 SelectedFeaturesFile:/log_reg/selected_feature_data0.txt}
2022/01/06 13:54:03 trainworker.go:332: structed params ={
	"selected_samples_file": "/log_reg/selected_sampled_data.txt",
	"selected_predictions_file": "/log_reg/selected_predictions.txt",
	"sample_weights_file": "/log_reg/sample_weights.txt",
	"num_samples": 1000,
	"class_num": 2,
	"feature_selection": "linear_regression",
	"num_explained_features": 20,
	"selected_features_file": "/log_reg/selected_feature_data0.txt"
}
2022/01/06 13:54:03 trainworker.go:359: [TrainWorker]: ----------- WorkerAddr , printParams Done-----------
2022/01/06 13:54:03 traintask.go:699: [TrainWorker]: begin task RunLimeFeature
2022/01/06 13:54:03 traintask.go:731: [PartyServer]: training method: distributed,  current distributed role:  0
2022/01/06 13:54:03 traintask.go:838: ---------------------------------------------------------------------------------
2022/01/06 13:54:03 traintask.go:839: [TrainWorker]: cmd is "/opt/falcon/build/src/executor/falcon --party-id 0 --party-num 3 --party-type 0 --fl-setting 1 --network-file CgkxMjcuMC4wLjEKCTEyNy4wLjAuMQoJMTI3LjAuMC4xEgsKCfOrAfSrAfWrARILCgmGrAGHrAGIrAESCwoJmawBmqwBm6wBGgsKCfClA/ClA/ClAw== --log-file /opt/falcon/src/falcon_platform/falcon_logs/Party-0_20220106_214726/runtime_logs/party0-distributed-parameter-server0-job1-train-lime_feature_selection/parameter_server --data-input-file /dataOutputPath/client.txt --data-output-file 0 --existing-key 1 --key-file /dataPath/phe_keys --algorithm-name lime_feature_selection --algorithm-params CiIvbG9nX3JlZy9zZWxlY3RlZF9zYW1wbGVkX2RhdGEudHh0EiEvbG9nX3JlZy9zZWxlY3RlZF9wcmVkaWN0aW9ucy50eHQaGy9sb2dfcmVnL3NhbXBsZV93ZWlnaHRzLnR4dCDoBygCOhFsaW5lYXJfcmVncmVzc2lvbkAUSiMvbG9nX3JlZy9zZWxlY3RlZF9mZWF0dXJlX2RhdGEwLnR4dA== --model-save-file /modelPath/saved_model.pb --model-report-file /modelPath/report.txt --is-inference 0 --inference-endpoint 0 --is-distributed 1 --distributed-train-network-file Cg8KCTEyNy4wLjAuMRD+qwEKDwoJMTI3LjAuMC4xEISsARIPCgkxMjcuMC4wLjEQ96sBEg8KCTEyNy4wLjAuMRD4qwE= --worker-id 0 --distributed-role 0"
2022/01/06 13:54:03 traintask.go:840: ---------------------------------------------------------------------------------
2022/01/06 13:54:03 traintask.go:843: [TrainWorker]: task RunLimeFeature start
2022/01/06 13:54:03 mngr-process.go:123: [subProcessMngr]: open subProcess, PID= 935
2022/01/06 13:54:03 workerbase.go:172: [WorkerBase]: reset called
2022/01/06 13:54:15 workerbase.go:172: [WorkerBase]: reset called
2022/01/06 13:54:27 workerbase.go:172: [WorkerBase]: reset called
2022/01/06 13:54:39 workerbase.go:172: [WorkerBase]: reset called
2022/01/06 13:54:51 workerbase.go:172: [WorkerBase]: reset called
2022/01/06 13:54:56 manager.go:105: [ResourceManager]: DeleteResources done
2022/01/06 13:54:56 trainworker.go:92: [TrainWorker]: WorkerAddr 127.0.0.1:22002, TrainWorker.DoTask Done for task lime_feature_taskCiIvbG9nX3JlZy9zZWxlY3RlZF9zYW1wbGVkX2RhdGEudHh0EiEvbG9nX3JlZy9zZWxlY3RlZF9wcmVkaWN0aW9ucy50eHQaGy9sb2dfcmVnL3NhbXBsZV93ZWlnaHRzLnR4dCDoBygCOhFsaW5lYXJfcmVncmVzc2lvbkAUSiMvbG9nX3JlZy9zZWxlY3RlZF9mZWF0dXJlX2RhdGEwLnR4dA== 
2022/01/06 13:54:57 trainworker.go:177: [TrainWorker] TrainWorker.RunMpc called, mpcAlgorithmName: linear_regression
2022/01/06 13:54:57 manager.go:100: [ResourceManager]: Wait worker kill all process/containers
2022/01/06 13:54:57 manager.go:105: [ResourceManager]: DeleteResources done
2022/01/06 13:54:57 traintask.go:16: [TrainWorker]: spawn thread for mpc
2022/01/06 13:54:57 traintask.go:1056: [TrainWorker]: begin task mpc
2022/01/06 13:54:57 traintask.go:1062: [TrainWorker]: Third Party base path for executing semi-party.x is : "/opt/falcon/third_party/MP-SPDZ"
2022/01/06 13:54:57 traintask.go:1069: [TrainWorker]: Config mpc-network file, write [127.0.0.1:22006
127.0.0.1:22025
127.0.0.1:22044] to file [/opt/falcon/third_party/MP-SPDZ/mpc-network-0] 
2022/01/06 13:54:57 traintask.go:1087: [TrainWorker]: Config mpcExecutorPortFile file, write [54000] to file [/opt/falcon/third_party/MP-SPDZ/Programs/Public-Input/linear_regression] 
2022/01/06 13:54:57 traintask.go:1102: [TrainWorker]: Config mpcExecutorPairNetworkCfgPath file, write port [54000] to file [/opt/falcon/third_party/MP-SPDZ/Programs/Public-Input/linear_regression] 
2022/01/06 13:54:57 traintask.go:1132: ---------------------------------------------------------------------------------
2022/01/06 13:54:57 traintask.go:1133: [TrainWorker]: cmd is "/opt/falcon/third_party/MP-SPDZ/semi-party.x -F -N 3 -p 0 -I -ip /opt/falcon/third_party/MP-SPDZ/mpc-network-0 linear_regression"
2022/01/06 13:54:57 traintask.go:1134: ---------------------------------------------------------------------------------
2022/01/06 13:54:57 mngr-process.go:123: [subProcessMngr]: open subProcess, PID= 937
2022/01/06 13:54:58 mngr-process.go:168: [subProcessMngr]: Manually Killed PID=cmd.Process.Pid 930
2022/01/06 13:54:59 mngr-process.go:144: [subProcessMngr]: subprocess exit status: << signal: quit (core dumped) >> 
2022/01/06 13:54:59 manager.go:86: [ResourceManager]: CreateResources error msg is: 
============> 
Start listening on thread 140106552125184
Party 0 is listening on port 54000 for external client connections.
Thread 140106552125184 found server.
 
<============
2022/01/06 13:55:01 workerbase.go:172: [WorkerBase]: reset called
2022/01/06 13:55:02 trainworker.go:179: [TrainWorker]: WorkerAddr 127.0.0.1:22002, TrainWorker.RunMpc for task linear_regression done
2022/01/06 13:55:04 trainworker.go:90: [TrainWorker] TrainWorker.DoTask called, taskName: lime_interpret_taskCiMvbG9nX3JlZy9zZWxlY3RlZF9mZWF0dXJlX2RhdGEwLnR4dBIhL2xvZ19yZWcvc2VsZWN0ZWRfcHJlZGljdGlvbnMudHh0GhsvbG9nX3JlZy9zYW1wbGVfd2VpZ2h0cy50eHQg6AcoAjoRbGluZWFyX3JlZ3Jlc3Npb25CTENBZ1FaQ21hbVptWm1abTVQekdhbVptWm1abTVQem1hbVptWm1abTVQMElDYkRGS0EzTm5aRklEYlhObFdacVptWm1abWJrL1lBRT1KFy9sb2dfcmVnL2V4cF9yZXBvcnQudHh0
2022/01/06 13:55:04 trainworker.go:239: [TrainWorker]: ----------- WorkerAddr , printParams ----------- lime_interpret
2022/01/06 13:55:04 trainworker.go:340: [TrainWorker]: original params = {state:{NoUnkeyedLiterals:{} DoNotCompare:[] DoNotCopy:[] atomicMessageInfo:0xc0000e8958} sizeCache:0 unknownFields:[] SelectedDataFile:/log_reg/selected_feature_data0.txt SelectedPredictionsFile:/log_reg/selected_predictions.txt SampleWeightsFile:/log_reg/sample_weights.txt NumSamples:1000 ClassNum:2 ClassId:0 InterpretModelName:linear_regression InterpretModelParam:CAgQZCmamZmZmZm5PzGamZmZmZm5PzmamZmZmZm5P0ICbDFKA3NnZFIDbXNlWZqZmZmZmbk/YAE= ExplanationReport:/log_reg/exp_report.txt}
2022/01/06 13:55:04 trainworker.go:344: structed params ={
	"selected_data_file": "/log_reg/selected_feature_data0.txt",
	"selected_predictions_file": "/log_reg/selected_predictions.txt",
	"sample_weights_file": "/log_reg/sample_weights.txt",
	"num_samples": 1000,
	"class_num": 2,
	"interpret_model_name": "linear_regression",
	"interpret_model_param": "CAgQZCmamZmZmZm5PzGamZmZmZm5PzmamZmZmZm5P0ICbDFKA3NnZFIDbXNlWZqZmZmZmbk/YAE=",
	"explanation_report": "/log_reg/exp_report.txt"
}
2022/01/06 13:55:04 trainworker.go:349: [TrainWorker]: original LinearRegressionParams = {state:{NoUnkeyedLiterals:{} DoNotCompare:[] DoNotCopy:[] atomicMessageInfo:0xc0000ad948} sizeCache:0 unknownFields:[] BatchSize:8 MaxIteration:100 ConvergeThreshold:0 WithRegularization:false Alpha:0.1 LearningRate:0.1 Decay:0.1 Penalty:l1 Optimizer:sgd Metric:mse DifferentialPrivacyBudget:0.1 FitBias:true}
2022/01/06 13:55:04 trainworker.go:353: structed LinearRegressionParams ={
	"batch_size": 8,
	"max_iteration": 100,
	"alpha": 0.1,
	"learning_rate": 0.1,
	"decay": 0.1,
	"penalty": "l1",
	"optimizer": "sgd",
	"metric": "mse",
	"differential_privacy_budget": 0.1,
	"fit_bias": true
}
2022/01/06 13:55:04 trainworker.go:359: [TrainWorker]: ----------- WorkerAddr , printParams Done-----------
2022/01/06 13:55:04 traintask.go:878: [TrainWorker]: begin task Interpret training
2022/01/06 13:55:04 traintask.go:910: [PartyServer]: training method: distributed,  current distributed role:  0
2022/01/06 13:55:04 traintask.go:1017: ---------------------------------------------------------------------------------
2022/01/06 13:55:04 traintask.go:1018: [TrainWorker]: cmd is "/opt/falcon/build/src/executor/falcon --party-id 0 --party-num 3 --party-type 0 --fl-setting 1 --network-file CgkxMjcuMC4wLjEKCTEyNy4wLjAuMQoJMTI3LjAuMC4xEgsKCfOrAfSrAfWrARILCgmGrAGHrAGIrAESCwoJmawBmqwBm6wBGgsKCfClA/ClA/ClAw== --log-file /opt/falcon/src/falcon_platform/falcon_logs/Party-0_20220106_214726/runtime_logs/party0-distributed-parameter-server0-job1-train-lime_interpret/parameter_server --data-input-file /dataOutputPath/client.txt --data-output-file 0 --existing-key 1 --key-file /dataPath/phe_keys --algorithm-name lime_interpret --algorithm-params CiMvbG9nX3JlZy9zZWxlY3RlZF9mZWF0dXJlX2RhdGEwLnR4dBIhL2xvZ19yZWcvc2VsZWN0ZWRfcHJlZGljdGlvbnMudHh0GhsvbG9nX3JlZy9zYW1wbGVfd2VpZ2h0cy50eHQg6AcoAjoRbGluZWFyX3JlZ3Jlc3Npb25CTENBZ1FaQ21hbVptWm1abTVQekdhbVptWm1abTVQem1hbVptWm1abTVQMElDYkRGS0EzTm5aRklEYlhObFdacVptWm1abWJrL1lBRT1KFy9sb2dfcmVnL2V4cF9yZXBvcnQudHh0 --model-save-file /modelPath/saved_model.pb --model-report-file /modelPath/report.txt --is-inference 0 --inference-endpoint 0 --is-distributed 1 --distributed-train-network-file Cg8KCTEyNy4wLjAuMRD+qwEKDwoJMTI3LjAuMC4xEISsARIPCgkxMjcuMC4wLjEQ96sBEg8KCTEyNy4wLjAuMRD4qwE= --worker-id 0 --distributed-role 0"
2022/01/06 13:55:04 traintask.go:1019: ---------------------------------------------------------------------------------
2022/01/06 13:55:04 traintask.go:1022: [TrainWorker]: task model LimeInterpret start
2022/01/06 13:55:04 mngr-process.go:123: [subProcessMngr]: open subProcess, PID= 942
2022/01/06 13:55:14 workerbase.go:172: [WorkerBase]: reset called
2022/01/06 13:55:26 workerbase.go:172: [WorkerBase]: reset called
2022/01/06 13:55:38 workerbase.go:172: [WorkerBase]: reset called
2022/01/06 13:55:49 manager.go:105: [ResourceManager]: DeleteResources done
2022/01/06 13:55:49 trainworker.go:92: [TrainWorker]: WorkerAddr 127.0.0.1:22002, TrainWorker.DoTask Done for task lime_interpret_taskCiMvbG9nX3JlZy9zZWxlY3RlZF9mZWF0dXJlX2RhdGEwLnR4dBIhL2xvZ19yZWcvc2VsZWN0ZWRfcHJlZGljdGlvbnMudHh0GhsvbG9nX3JlZy9zYW1wbGVfd2VpZ2h0cy50eHQg6AcoAjoRbGluZWFyX3JlZ3Jlc3Npb25CTENBZ1FaQ21hbVptWm1abTVQekdhbVptWm1abTVQem1hbVptWm1abTVQMElDYkRGS0EzTm5aRklEYlhObFdacVptWm1abWJrL1lBRT1KFy9sb2dfcmVnL2V4cF9yZXBvcnQudHh0 
2022/01/06 13:55:50 trainworker.go:177: [TrainWorker] TrainWorker.RunMpc called, mpcAlgorithmName: linear_regression
2022/01/06 13:55:50 manager.go:100: [ResourceManager]: Wait worker kill all process/containers
2022/01/06 13:55:50 manager.go:105: [ResourceManager]: DeleteResources done
2022/01/06 13:55:50 traintask.go:16: [TrainWorker]: spawn thread for mpc
2022/01/06 13:55:50 traintask.go:1056: [TrainWorker]: begin task mpc
2022/01/06 13:55:50 traintask.go:1062: [TrainWorker]: Third Party base path for executing semi-party.x is : "/opt/falcon/third_party/MP-SPDZ"
2022/01/06 13:55:50 traintask.go:1069: [TrainWorker]: Config mpc-network file, write [127.0.0.1:22006
127.0.0.1:22025
127.0.0.1:22044] to file [/opt/falcon/third_party/MP-SPDZ/mpc-network-0] 
2022/01/06 13:55:50 traintask.go:1087: [TrainWorker]: Config mpcExecutorPortFile file, write [54000] to file [/opt/falcon/third_party/MP-SPDZ/Programs/Public-Input/linear_regression] 
2022/01/06 13:55:50 traintask.go:1102: [TrainWorker]: Config mpcExecutorPairNetworkCfgPath file, write port [54000] to file [/opt/falcon/third_party/MP-SPDZ/Programs/Public-Input/linear_regression] 
2022/01/06 13:55:50 traintask.go:1132: ---------------------------------------------------------------------------------
2022/01/06 13:55:50 traintask.go:1133: [TrainWorker]: cmd is "/opt/falcon/third_party/MP-SPDZ/semi-party.x -F -N 3 -p 0 -I -ip /opt/falcon/third_party/MP-SPDZ/mpc-network-0 linear_regression"
2022/01/06 13:55:50 traintask.go:1134: ---------------------------------------------------------------------------------
2022/01/06 13:55:50 mngr-process.go:123: [subProcessMngr]: open subProcess, PID= 944
2022/01/06 13:55:50 workerbase.go:172: [WorkerBase]: reset called
2022/01/06 13:55:50 mngr-process.go:168: [subProcessMngr]: Manually Killed PID=cmd.Process.Pid 937
2022/01/06 13:55:51 mngr-process.go:144: [subProcessMngr]: subprocess exit status: << signal: quit (core dumped) >> 
2022/01/06 13:55:51 manager.go:86: [ResourceManager]: CreateResources error msg is: 
============> 
Binding to socket on wuyuncheng-ThinkPad-X13-Gen-2i:22006 failed, trying again in a second ...
Binding to socket on wuyuncheng-ThinkPad-X13-Gen-2i:22006 failed, trying again in a second ...
Start listening on thread 139756191016704
Party 0 is listening on port 54000 for external client connections.
Thread 139756191016704 found server.
 
<============
2022/01/06 13:55:55 trainworker.go:179: [TrainWorker]: WorkerAddr 127.0.0.1:22002, TrainWorker.RunMpc for task linear_regression done
2022/01/06 13:55:55 trainworker.go:90: [TrainWorker] TrainWorker.DoTask called, taskName: lime_feature_taskCiIvbG9nX3JlZy9zZWxlY3RlZF9zYW1wbGVkX2RhdGEudHh0EiEvbG9nX3JlZy9zZWxlY3RlZF9wcmVkaWN0aW9ucy50eHQaGy9sb2dfcmVnL3NhbXBsZV93ZWlnaHRzLnR4dCDoBygCMAE6EWxpbmVhcl9yZWdyZXNzaW9uQBRKIy9sb2dfcmVnL3NlbGVjdGVkX2ZlYXR1cmVfZGF0YTEudHh0
2022/01/06 13:55:55 trainworker.go:239: [TrainWorker]: ----------- WorkerAddr , printParams ----------- lime_feature_selection
2022/01/06 13:55:55 trainworker.go:328: [TrainWorker]: original params = {state:{NoUnkeyedLiterals:{} DoNotCompare:[] DoNotCopy:[] atomicMessageInfo:0xc0000e8810} sizeCache:0 unknownFields:[] SelectedSamplesFile:/log_reg/selected_sampled_data.txt SelectedPredictionsFile:/log_reg/selected_predictions.txt SampleWeightsFile:/log_reg/sample_weights.txt NumSamples:1000 ClassNum:2 ClassId:1 FeatureSelection:linear_regression NumExplainedFeatures:20 SelectedFeaturesFile:/log_reg/selected_feature_data1.txt}
2022/01/06 13:55:55 trainworker.go:332: structed params ={
	"selected_samples_file": "/log_reg/selected_sampled_data.txt",
	"selected_predictions_file": "/log_reg/selected_predictions.txt",
	"sample_weights_file": "/log_reg/sample_weights.txt",
	"num_samples": 1000,
	"class_num": 2,
	"class_id": 1,
	"feature_selection": "linear_regression",
	"num_explained_features": 20,
	"selected_features_file": "/log_reg/selected_feature_data1.txt"
}
2022/01/06 13:55:55 trainworker.go:359: [TrainWorker]: ----------- WorkerAddr , printParams Done-----------
2022/01/06 13:55:55 traintask.go:699: [TrainWorker]: begin task RunLimeFeature
2022/01/06 13:55:55 traintask.go:731: [PartyServer]: training method: distributed,  current distributed role:  0
2022/01/06 13:55:55 traintask.go:838: ---------------------------------------------------------------------------------
2022/01/06 13:55:55 traintask.go:839: [TrainWorker]: cmd is "/opt/falcon/build/src/executor/falcon --party-id 0 --party-num 3 --party-type 0 --fl-setting 1 --network-file CgkxMjcuMC4wLjEKCTEyNy4wLjAuMQoJMTI3LjAuMC4xEgsKCfOrAfSrAfWrARILCgmGrAGHrAGIrAESCwoJmawBmqwBm6wBGgsKCfClA/ClA/ClAw== --log-file /opt/falcon/src/falcon_platform/falcon_logs/Party-0_20220106_214726/runtime_logs/party0-distributed-parameter-server0-job1-train-lime_feature_selection/parameter_server --data-input-file /dataOutputPath/client.txt --data-output-file 0 --existing-key 1 --key-file /dataPath/phe_keys --algorithm-name lime_feature_selection --algorithm-params CiIvbG9nX3JlZy9zZWxlY3RlZF9zYW1wbGVkX2RhdGEudHh0EiEvbG9nX3JlZy9zZWxlY3RlZF9wcmVkaWN0aW9ucy50eHQaGy9sb2dfcmVnL3NhbXBsZV93ZWlnaHRzLnR4dCDoBygCMAE6EWxpbmVhcl9yZWdyZXNzaW9uQBRKIy9sb2dfcmVnL3NlbGVjdGVkX2ZlYXR1cmVfZGF0YTEudHh0 --model-save-file /modelPath/saved_model.pb --model-report-file /modelPath/report.txt --is-inference 0 --inference-endpoint 0 --is-distributed 1 --distributed-train-network-file Cg8KCTEyNy4wLjAuMRD+qwEKDwoJMTI3LjAuMC4xEISsARIPCgkxMjcuMC4wLjEQ96sBEg8KCTEyNy4wLjAuMRD4qwE= --worker-id 0 --distributed-role 0"
2022/01/06 13:55:55 traintask.go:840: ---------------------------------------------------------------------------------
2022/01/06 13:55:55 traintask.go:843: [TrainWorker]: task RunLimeFeature start
2022/01/06 13:55:55 mngr-process.go:123: [subProcessMngr]: open subProcess, PID= 948
2022/01/06 13:56:00 workerbase.go:172: [WorkerBase]: reset called
2022/01/06 13:56:10 workerbase.go:172: [WorkerBase]: reset called
2022/01/06 13:56:20 workerbase.go:172: [WorkerBase]: reset called
2022/01/06 13:56:30 workerbase.go:172: [WorkerBase]: reset called
2022/01/06 13:56:40 workerbase.go:172: [WorkerBase]: reset called
2022/01/06 13:56:48 manager.go:105: [ResourceManager]: DeleteResources done
2022/01/06 13:56:48 trainworker.go:92: [TrainWorker]: WorkerAddr 127.0.0.1:22002, TrainWorker.DoTask Done for task lime_feature_taskCiIvbG9nX3JlZy9zZWxlY3RlZF9zYW1wbGVkX2RhdGEudHh0EiEvbG9nX3JlZy9zZWxlY3RlZF9wcmVkaWN0aW9ucy50eHQaGy9sb2dfcmVnL3NhbXBsZV93ZWlnaHRzLnR4dCDoBygCMAE6EWxpbmVhcl9yZWdyZXNzaW9uQBRKIy9sb2dfcmVnL3NlbGVjdGVkX2ZlYXR1cmVfZGF0YTEudHh0 
2022/01/06 13:56:48 trainworker.go:177: [TrainWorker] TrainWorker.RunMpc called, mpcAlgorithmName: linear_regression
2022/01/06 13:56:48 manager.go:100: [ResourceManager]: Wait worker kill all process/containers
2022/01/06 13:56:48 manager.go:105: [ResourceManager]: DeleteResources done
2022/01/06 13:56:48 traintask.go:16: [TrainWorker]: spawn thread for mpc
2022/01/06 13:56:48 traintask.go:1056: [TrainWorker]: begin task mpc
2022/01/06 13:56:48 traintask.go:1062: [TrainWorker]: Third Party base path for executing semi-party.x is : "/opt/falcon/third_party/MP-SPDZ"
2022/01/06 13:56:48 traintask.go:1069: [TrainWorker]: Config mpc-network file, write [127.0.0.1:22006
127.0.0.1:22025
127.0.0.1:22044] to file [/opt/falcon/third_party/MP-SPDZ/mpc-network-0] 
2022/01/06 13:56:48 traintask.go:1087: [TrainWorker]: Config mpcExecutorPortFile file, write [54000] to file [/opt/falcon/third_party/MP-SPDZ/Programs/Public-Input/linear_regression] 
2022/01/06 13:56:48 traintask.go:1102: [TrainWorker]: Config mpcExecutorPairNetworkCfgPath file, write port [54000] to file [/opt/falcon/third_party/MP-SPDZ/Programs/Public-Input/linear_regression] 
2022/01/06 13:56:48 traintask.go:1132: ---------------------------------------------------------------------------------
2022/01/06 13:56:48 traintask.go:1133: [TrainWorker]: cmd is "/opt/falcon/third_party/MP-SPDZ/semi-party.x -F -N 3 -p 0 -I -ip /opt/falcon/third_party/MP-SPDZ/mpc-network-0 linear_regression"
2022/01/06 13:56:48 traintask.go:1134: ---------------------------------------------------------------------------------
2022/01/06 13:56:48 mngr-process.go:123: [subProcessMngr]: open subProcess, PID= 950
2022/01/06 13:56:48 mngr-process.go:168: [subProcessMngr]: Manually Killed PID=cmd.Process.Pid 944
2022/01/06 13:56:49 mngr-process.go:144: [subProcessMngr]: subprocess exit status: << signal: quit (core dumped) >> 
2022/01/06 13:56:49 manager.go:86: [ResourceManager]: CreateResources error msg is: 
============> 
Binding to socket on wuyuncheng-ThinkPad-X13-Gen-2i:22006 failed, trying again in a second ...
Start listening on thread 140217984390912
Party 0 is listening on port 54000 for external client connections.
Thread 140217984390912 found server.
 
<============
2022/01/06 13:56:50 workerbase.go:172: [WorkerBase]: reset called
2022/01/06 13:56:53 trainworker.go:179: [TrainWorker]: WorkerAddr 127.0.0.1:22002, TrainWorker.RunMpc for task linear_regression done
2022/01/06 13:56:53 trainworker.go:90: [TrainWorker] TrainWorker.DoTask called, taskName: lime_interpret_taskCiMvbG9nX3JlZy9zZWxlY3RlZF9mZWF0dXJlX2RhdGExLnR4dBIhL2xvZ19yZWcvc2VsZWN0ZWRfcHJlZGljdGlvbnMudHh0GhsvbG9nX3JlZy9zYW1wbGVfd2VpZ2h0cy50eHQg6AcoAjABOhFsaW5lYXJfcmVncmVzc2lvbkJMQ0FnUVpDbWFtWm1abVptNVB6R2FtWm1abVptNVB6bWFtWm1abVptNVAwSUNiREZLQTNOblpGSURiWE5sV1pxWm1abVptYmsvWUFFPUoXL2xvZ19yZWcvZXhwX3JlcG9ydC50eHQ=
2022/01/06 13:56:53 trainworker.go:239: [TrainWorker]: ----------- WorkerAddr , printParams ----------- lime_interpret
2022/01/06 13:56:53 trainworker.go:340: [TrainWorker]: original params = {state:{NoUnkeyedLiterals:{} DoNotCompare:[] DoNotCopy:[] atomicMessageInfo:0xc0000e8958} sizeCache:0 unknownFields:[] SelectedDataFile:/log_reg/selected_feature_data1.txt SelectedPredictionsFile:/log_reg/selected_predictions.txt SampleWeightsFile:/log_reg/sample_weights.txt NumSamples:1000 ClassNum:2 ClassId:1 InterpretModelName:linear_regression InterpretModelParam:CAgQZCmamZmZmZm5PzGamZmZmZm5PzmamZmZmZm5P0ICbDFKA3NnZFIDbXNlWZqZmZmZmbk/YAE= ExplanationReport:/log_reg/exp_report.txt}
2022/01/06 13:56:53 trainworker.go:344: structed params ={
	"selected_data_file": "/log_reg/selected_feature_data1.txt",
	"selected_predictions_file": "/log_reg/selected_predictions.txt",
	"sample_weights_file": "/log_reg/sample_weights.txt",
	"num_samples": 1000,
	"class_num": 2,
	"class_id": 1,
	"interpret_model_name": "linear_regression",
	"interpret_model_param": "CAgQZCmamZmZmZm5PzGamZmZmZm5PzmamZmZmZm5P0ICbDFKA3NnZFIDbXNlWZqZmZmZmbk/YAE=",
	"explanation_report": "/log_reg/exp_report.txt"
}
2022/01/06 13:56:53 trainworker.go:349: [TrainWorker]: original LinearRegressionParams = {state:{NoUnkeyedLiterals:{} DoNotCompare:[] DoNotCopy:[] atomicMessageInfo:0xc0000ad948} sizeCache:0 unknownFields:[] BatchSize:8 MaxIteration:100 ConvergeThreshold:0 WithRegularization:false Alpha:0.1 LearningRate:0.1 Decay:0.1 Penalty:l1 Optimizer:sgd Metric:mse DifferentialPrivacyBudget:0.1 FitBias:true}
2022/01/06 13:56:53 trainworker.go:353: structed LinearRegressionParams ={
	"batch_size": 8,
	"max_iteration": 100,
	"alpha": 0.1,
	"learning_rate": 0.1,
	"decay": 0.1,
	"penalty": "l1",
	"optimizer": "sgd",
	"metric": "mse",
	"differential_privacy_budget": 0.1,
	"fit_bias": true
}
2022/01/06 13:56:53 trainworker.go:359: [TrainWorker]: ----------- WorkerAddr , printParams Done-----------
2022/01/06 13:56:53 traintask.go:878: [TrainWorker]: begin task Interpret training
2022/01/06 13:56:53 traintask.go:910: [PartyServer]: training method: distributed,  current distributed role:  0
2022/01/06 13:56:53 traintask.go:1017: ---------------------------------------------------------------------------------
2022/01/06 13:56:53 traintask.go:1018: [TrainWorker]: cmd is "/opt/falcon/build/src/executor/falcon --party-id 0 --party-num 3 --party-type 0 --fl-setting 1 --network-file CgkxMjcuMC4wLjEKCTEyNy4wLjAuMQoJMTI3LjAuMC4xEgsKCfOrAfSrAfWrARILCgmGrAGHrAGIrAESCwoJmawBmqwBm6wBGgsKCfClA/ClA/ClAw== --log-file /opt/falcon/src/falcon_platform/falcon_logs/Party-0_20220106_214726/runtime_logs/party0-distributed-parameter-server0-job1-train-lime_interpret/parameter_server --data-input-file /dataOutputPath/client.txt --data-output-file 0 --existing-key 1 --key-file /dataPath/phe_keys --algorithm-name lime_interpret --algorithm-params CiMvbG9nX3JlZy9zZWxlY3RlZF9mZWF0dXJlX2RhdGExLnR4dBIhL2xvZ19yZWcvc2VsZWN0ZWRfcHJlZGljdGlvbnMudHh0GhsvbG9nX3JlZy9zYW1wbGVfd2VpZ2h0cy50eHQg6AcoAjABOhFsaW5lYXJfcmVncmVzc2lvbkJMQ0FnUVpDbWFtWm1abVptNVB6R2FtWm1abVptNVB6bWFtWm1abVptNVAwSUNiREZLQTNOblpGSURiWE5sV1pxWm1abVptYmsvWUFFPUoXL2xvZ19yZWcvZXhwX3JlcG9ydC50eHQ= --model-save-file /modelPath/saved_model.pb --model-report-file /modelPath/report.txt --is-inference 0 --inference-endpoint 0 --is-distributed 1 --distributed-train-network-file Cg8KCTEyNy4wLjAuMRD+qwEKDwoJMTI3LjAuMC4xEISsARIPCgkxMjcuMC4wLjEQ96sBEg8KCTEyNy4wLjAuMRD4qwE= --worker-id 0 --distributed-role 0"
2022/01/06 13:56:53 traintask.go:1019: ---------------------------------------------------------------------------------
2022/01/06 13:56:53 traintask.go:1022: [TrainWorker]: task model LimeInterpret start
2022/01/06 13:56:53 mngr-process.go:123: [subProcessMngr]: open subProcess, PID= 956
2022/01/06 13:57:00 workerbase.go:172: [WorkerBase]: reset called
2022/01/06 13:57:10 workerbase.go:172: [WorkerBase]: reset called
2022/01/06 13:57:20 workerbase.go:172: [WorkerBase]: reset called
2022/01/06 13:57:30 workerbase.go:172: [WorkerBase]: reset called
2022/01/06 13:57:38 manager.go:105: [ResourceManager]: DeleteResources done
2022/01/06 13:57:38 trainworker.go:92: [TrainWorker]: WorkerAddr 127.0.0.1:22002, TrainWorker.DoTask Done for task lime_interpret_taskCiMvbG9nX3JlZy9zZWxlY3RlZF9mZWF0dXJlX2RhdGExLnR4dBIhL2xvZ19yZWcvc2VsZWN0ZWRfcHJlZGljdGlvbnMudHh0GhsvbG9nX3JlZy9zYW1wbGVfd2VpZ2h0cy50eHQg6AcoAjABOhFsaW5lYXJfcmVncmVzc2lvbkJMQ0FnUVpDbWFtWm1abVptNVB6R2FtWm1abVptNVB6bWFtWm1abVptNVAwSUNiREZLQTNOblpGSURiWE5sV1pxWm1abVptYmsvWUFFPUoXL2xvZ19yZWcvZXhwX3JlcG9ydC50eHQ= 
2022/01/06 13:57:51 workerbase.go:145: [TrainWorker]: Timeout, server 127.0.0.1:22002 suicide 
2022/01/06 13:57:51 rpc_utils.go:49: ----Rpc Call----, addr: 127.0.0.1:22002, methodName: TrainWorker.Shutdown 
2022/01/06 13:57:51 workerbase.go:110: [WorkerBase]: Shutdown called, TrainWorker: Shutdown 127.0.0.1:22002
2022/01/06 13:57:51 manager.go:100: [ResourceManager]: Wait worker kill all process/containers
2022/01/06 13:57:51 manager.go:105: [ResourceManager]: DeleteResources done
2022/01/06 13:57:51 manager.go:105: [ResourceManager]: DeleteResources done
2022/01/06 13:57:51 rpcbase.go:90: [TrainWorker]: Listener.Accept Error: accept tcp [::]:22002: use of closed network connection 
2022/01/06 13:57:51 workerbase.go:152: [TrainWorker]: WorkerBase timeout, RPC 127.0.0.1:22002 shutdown successfully
2022/01/06 13:57:51 workerbase.go:139: [TrainWorker]: server 127.0.0.1:22002 quit HeartBeat eventLoop 
2022/01/06 13:57:52 mngr-process.go:168: [subProcessMngr]: Manually Killed PID=cmd.Process.Pid 950
2022/01/06 13:57:52 mngr-process.go:144: [subProcessMngr]: subprocess exit status: << signal: quit (core dumped) >> 
2022/01/06 13:57:52 manager.go:86: [ResourceManager]: CreateResources error msg is: 
============> 
Binding to socket on wuyuncheng-ThinkPad-X13-Gen-2i:22006 failed, trying again in a second ...
Start listening on thread 140120771630848
Party 0 is listening on port 54000 for external client connections.
Thread 140120771630848 found server.
 
<============
